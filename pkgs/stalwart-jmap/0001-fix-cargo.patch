From aa8344358b447cbd0046f83f0a2e5e8fd6aadb65 Mon Sep 17 00:00:00 2001
From: Christoph Asche <christoph@asche.co>
Date: Sat, 4 Mar 2023 15:51:53 +0100
Subject: [PATCH] fix cargo

---
 Cargo.lock | 17 ++++-------------
 Cargo.toml |  3 +++
 2 files changed, 7 insertions(+), 13 deletions(-)

diff --git a/Cargo.lock b/Cargo.lock
index fb04c3c..e25eb24 100644
--- a/Cargo.lock
+++ b/Cargo.lock
@@ -1495,15 +1495,6 @@ dependencies = [
  "winapi",
 ]
 
-[[package]]
-name = "gethostname"
-version = "0.3.0"
-source = "registry+https://github.com/rust-lang/crates.io-index"
-checksum = "bb65d4ba3173c56a500b555b532f72c42e8d1fe64962b518897f8959fae2c177"
-dependencies = [
- "libc",
- "winapi",
-]
 
 [[package]]
 name = "gethostname"
@@ -1843,7 +1834,7 @@ version = "0.1.0"
 dependencies = [
  "jmap",
  "jmap_sieve",
- "mail-builder 0.2.3 (git+https://github.com/stalwartlabs/mail-builder)",
+ "mail-builder",
  "mail-parser",
  "mail-send",
  "serde",
@@ -2066,11 +2057,11 @@ dependencies = [
 
 [[package]]
 name = "mail-builder"
-version = "0.2.3"
+version = "0.2.5"
 source = "registry+https://github.com/rust-lang/crates.io-index"
 checksum = "55cec8aafd052a9937cee8f55619a392f00cc969c434c4d70c450c4275718e1c"
 dependencies = [
- "gethostname 0.3.0",
+ "gethostname 0.4.0",
 ]
 
 [[package]]
@@ -2097,7 +2088,7 @@ source = "git+https://github.com/stalwartlabs/mail-send#1d157d43a2a4c7b34258f460
 dependencies = [
  "base64",
  "gethostname 0.2.3",
- "mail-builder 0.2.3 (registry+https://github.com/rust-lang/crates.io-index)",
+ "mail-builder",
  "md5",
  "rand",
  "rsa",
diff --git a/Cargo.toml b/Cargo.toml
index a45fcd0..892a6e9 100644
--- a/Cargo.toml
+++ b/Cargo.toml
@@ -136,3 +136,6 @@ assets = [
 conf-files = [
     "/etc/stalwart-jmap/config.yml"
 ]
+
+[patch.crates-io]
+mail-builder = { git = "https://github.com/stalwartlabs/mail-builder" }
-- 
2.39.2

